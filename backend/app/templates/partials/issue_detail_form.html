<form class="form" hx-post="/issues/{{ issue.id }}" hx-target="#issue-detail" hx-swap="outerHTML">
  <div class="form-row">
    <label>
      Title
      <input type="text" name="title" value="{{ issue.title }}" required />
    </label>
    <label>
      Domain
      <input type="text" name="domain" value="{{ issue.domain }}" />
    </label>
    <label>
      Owner
      <input type="text" name="owner" value="{{ issue.owner }}" placeholder="Owner" />
    </label>
  </div>

  <div class="form-row">
    <label>
      Status
      <select name="status">
        {% for option in ["Open", "Watching", "Mitigated", "Closed"] %}
          <option value="{{ option }}" {% if issue.status == option %}selected{% endif %}>{{ option }}</option>
        {% endfor %}
      </select>
    </label>
    <label>
      Confidence
      <input type="number" step="0.01" min="0" max="1" name="confidence" value="{{ issue.confidence }}" />
    </label>
    <div class="status-badge status-{{ issue.status|lower }}">{{ issue.status }}</div>
  </div>

  <label>
    Situation
    <textarea name="situation" rows="4">{{ issue.situation }}</textarea>
  </label>

  <label>
    Complication
    <textarea name="complication" rows="4">{{ issue.complication }}</textarea>
  </label>

  <label>
    Resolution (Hypotheses)
    <textarea name="resolution" rows="4">{{ issue.resolution }}</textarea>
  </label>

  <div class="form-actions">
    <button class="primary" type="submit">Save</button>
    {% if saved %}
      <span class="saved">Saved</span>
    {% endif %}
  </div>
</form>

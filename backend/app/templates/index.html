{% extends "base.html" %}

{% block content %}
<section class="panel">
  <div class="panel-header">
    <h2>
      Issue Register
      {% if last_meeting_run_end %}
        <span class="subtle">(as of {{ last_meeting_run_end }})</span>
      {% endif %}
    </h2>
  </div>

  {% include "partials/issue_filters.html" %}

  <form class="form" hx-post="/issues" hx-target="#issue-list" hx-swap="afterbegin">
    <div class="form-row">
      <label>
        Title
        <input type="text" name="title" placeholder="Describe the issue" required />
      </label>
      <label>
        Domain
        <select name="domain">
          <option value="General">General</option>
          {% for option in domain_options %}
            <option value="{{ option.name }}">{{ option.name }}</option>
          {% endfor %}
        </select>
      </label>
      <label>
        Owner
        <select name="owner">
          <option value="">Unassigned</option>
          {% for option in owner_options %}
            <option value="{{ option.name }}">{{ option.name }}</option>
          {% endfor %}
        </select>
      </label>
    </div>
    <button class="primary" type="submit">Add Issue</button>
  </form>

  <div id="issue-list" hx-get="/issues" hx-trigger="load, issue-created from:body">
    {% include "partials/issues_list.html" %}
  </div>
</section>
{% endblock %}

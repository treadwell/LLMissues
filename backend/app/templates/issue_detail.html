{% extends "base.html" %}

{% block content %}
<section class="panel">
  <div class="panel-header">
    <h2>Issue Detail</h2>
    <a class="secondary" href="/">Back</a>
  </div>
  <div id="issue-detail">
    {% include "partials/issue_detail_form.html" %}
  </div>
  <div class="inline-actions">
    <form class="form inline" action="/options/domain" method="post">
      <div class="form-row">
        <label>
          Add Domain
          <input type="text" name="name" placeholder="New domain" required />
        </label>
        <input type="hidden" name="return_to" value="{{ request.url.path }}" />
        <button class="secondary" type="submit">Add</button>
      </div>
    </form>
    <form class="form inline" action="/options/owner" method="post">
      <div class="form-row">
        <label>
          Add Owner
          <input type="text" name="name" placeholder="New owner" required />
        </label>
        <input type="hidden" name="return_to" value="{{ request.url.path }}" />
        <button class="secondary" type="submit">Add</button>
      </div>
    </form>
  </div>
</section>

<section class="panel">
  <div class="panel-header">
    <h2>Linked Documents</h2>
  </div>
  <div id="issue-documents">
    {% include "partials/issue_documents.html" %}
  </div>
</section>

<section class="panel">
  <div class="panel-header">
    <h2>Next Steps</h2>
  </div>
  <div id="issue-steps">
    {% set issue_id = issue.id %}
    {% include "partials/issue_steps.html" %}
  </div>
</section>

<section class="panel">
  <div class="panel-header">
    <h2>Revision History</h2>
  </div>
  {% if revisions %}
    <ul class="revision-list">
      {% for revision in revisions %}
        <li class="revision-item">
          <div class="revision-field">{{ revision.field }}</div>
          <div class="revision-meta">
            {{ revision.actor }} Â· {{ revision.created_at }}
          </div>
          <div class="revision-values">
            <div class="revision-old">{{ revision.old_value }}</div>
            <div class="revision-new">{{ revision.new_value }}</div>
          </div>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <div class="empty-state">No revisions yet.</div>
  {% endif %}
</section>
{% endblock %}
